<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HokiPoki - Put Your Model In, Pull Another Out</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#000000">

    <!-- Open Graph / Social Sharing -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hoki-poki.ai/">
    <meta property="og:title" content="HokiPoki - Switch Models, Not Tabs">
    <meta property="og:description" content="When your AI gets stuck, hop to another. Same terminal, same context, different model.">
    <meta property="og:image" content="https://hoki-poki.ai/android-chrome-512x512.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://hoki-poki.ai/">
    <meta name="twitter:title" content="HokiPoki - Switch Models, Not Tabs">
    <meta name="twitter:description" content="When your AI gets stuck, hop to another. Same terminal, same context, different model.">
    <meta name="twitter:image" content="https://hoki-poki.ai/android-chrome-512x512.png">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R3M4E5ERDF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-R3M4E5ERDF');
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="config.js"></script>
    <script>
        (function() {
            const storageKey = 'hokipoki-theme';
            let storedTheme = null;
            try {
                storedTheme = localStorage.getItem(storageKey);
            } catch (error) {
                storedTheme = null;
            }
            const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
            const theme = storedTheme === 'light' || storedTheme === 'dark'
                ? storedTheme
                : (prefersLight ? 'light' : 'dark');
            document.documentElement.setAttribute('data-theme', theme || 'dark');
        })();
    </script>
    <style>
        :root {
            --transition-speed: 0.35s;
            /* Terminal Colors - Pure black background with neon fluorescent colors */
            --bg-dark: #000000;
            --bg-card: #000000;
            --border-color: #4d6650;
            --txt-main: #ffffff;
            --txt-muted: #808080;

            /* Neon Terminal Colors */
            --neon-cyan: #00ffff;
            --neon-magenta: #ff00ff;
            --neon-yellow: #ffff00;
            --neon-green: #4d6650;
            --neon-red: #ff0000;
        }

        :root[data-theme="light"] {
            --bg-dark: #f4f6f8;
            --bg-card: #ffffff;
            --border-color: #c7ced6;
            --txt-main: #050505;
            --txt-muted: #4d4d4d;
            /* Adjusted neon colors for light theme contrast */
            --neon-yellow: #b8860b;  /* DarkGoldenrod - readable on light bg */
            --neon-cyan: #0099aa;    /* Darker cyan for better contrast */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "JetBrains Mono", "Courier New", Consolas, monospace;
            background: var(--bg-dark);
            color: var(--txt-main);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem 5rem;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1.25rem;
            padding: 2.5rem 0;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: "JetBrains Mono", monospace;
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--neon-cyan);
        }

        .logo::before {
            content: "> ";
            color: var(--neon-cyan);
        }

        .logo::after {
            content: "_";
            animation: blink 1s infinite;
        }

        .tagline {
            font-size: 0.625rem;
            color: var(--txt-muted);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-weight: 700;
        }

        nav {
            display: flex;
            gap: 1.75rem;
            font-size: 0.625rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        nav a {
            color: var(--txt-muted);
            text-decoration: none;
            position: relative;
            transition: color 0.1s;
        }

        nav a::before {
            content: "[";
        }

        nav a::after {
            content: "]";
        }

        nav a:hover,
        nav a:focus-visible {
            color: var(--neon-cyan);
        }

        .theme-toggle {
            appearance: none;
            border: 1px solid var(--border-color);
            background: var(--bg-card);
            color: var(--txt-main);
            font-family: "JetBrains Mono", monospace;
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.35rem 0.85rem;
            cursor: pointer;
            position: relative;
            transition: border-color var(--transition-speed), background-color var(--transition-speed), color var(--transition-speed);
        }

        .theme-toggle::before,
        .theme-toggle::after {
            color: var(--neon-cyan);
            font-weight: 700;
        }

        .theme-toggle::before {
            content: "[";
            margin-right: 0.3rem;
        }

        .theme-toggle::after {
            content: "]";
            margin-left: 0.3rem;
        }

        .theme-toggle .toggle-label {
            font-size: 0.6rem;
            letter-spacing: 0.2em;
        }

        .theme-toggle .toggle-label span {
            color: var(--neon-yellow);
        }

        .toggle-pill {
            width: 44px;
            height: 16px;
            border: 1px solid var(--border-color);
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            background: var(--bg-card);
            padding: 0 2px;
            transition: border-color var(--transition-speed), background-color var(--transition-speed);
        }

        .toggle-thumb {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--neon-cyan);
            transition: transform var(--transition-speed), background-color var(--transition-speed);
        }

        .theme-toggle.is-light::before,
        .theme-toggle.is-light::after {
            color: var(--neon-magenta);
        }

        .theme-toggle.is-light .toggle-label span {
            color: var(--neon-magenta);
        }

        .theme-toggle.is-light .toggle-thumb {
            transform: translateX(20px);
            background: var(--neon-magenta);
        }

        .theme-toggle.is-light .toggle-pill {
            border-color: var(--neon-magenta);
        }

        .theme-toggle:focus-visible {
            outline: none;
            border-color: var(--neon-cyan);
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.2);
        }

        .theme-toggle.is-light:focus-visible {
            border-color: var(--neon-magenta);
            box-shadow: 0 0 0 2px rgba(255, 0, 255, 0.2);
        }

        .cta-buttons {
            display: flex;
            gap: 0.85rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border: 1px solid;
            background: var(--bg-card);
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.1s;
            outline: none;
            font-size: 0.75rem;
        }

        .btn::before {
            content: "[";
        }

        .btn::after {
            content: "]";
        }

        .btn-primary {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
        }

        .btn-primary:hover,
        .btn-primary:focus-visible {
            background: rgba(0, 255, 255, 0.1);
            color: var(--neon-cyan);
        }

        .btn-secondary {
            border-color: var(--neon-yellow);
            color: var(--neon-yellow);
        }

        .btn-secondary:hover,
        .btn-secondary:focus-visible {
            background: rgba(255, 255, 0, 0.1);
            color: var(--neon-yellow);
        }

        .hero {
            position: relative;
            padding: 5rem 0 6rem;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 2.5rem;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
        }

        .hero-content {
            grid-column: span 7;
            display: flex;
            flex-direction: column;
            gap: 2.25rem;
            position: relative;
        }

        .hero-content h1 {
            font-family: "JetBrains Mono", monospace;
            font-size: clamp(2rem, 4vw + 1rem, 3.5rem);
            line-height: 1.2;
            letter-spacing: 0.02em;
            font-weight: 700;
            text-transform: uppercase;
        }

        .hero-content h1 .gradient {
            color: var(--neon-cyan);
        }

        .hero-content p {
            font-size: 1.1rem;
            color: var(--txt-muted);
            line-height: 1.7;
            max-width: 540px;
        }

        .hero-song {
            position: relative;
            width: fit-content;
            padding: 1.2rem 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            overflow: hidden;
            cursor: pointer;
            transition: border-color 0.1s, background-color var(--transition-speed), color var(--transition-speed);
        }

        .hero-song:hover {
            border-color: var(--neon-yellow);
        }

        .song-label {
            display: block;
            font-size: 0.625rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--txt-muted);
            margin-bottom: 0.6rem;
            font-weight: 700;
        }

        .song-lines {
            position: relative;
            min-height: 1.55rem;
        }

        .song-lines span {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            opacity: 0;
            transform: translateY(12px);
            animation: songCycle 16s infinite;
            font-weight: 700;
            letter-spacing: 0.05em;
            color: var(--neon-yellow);
            text-transform: uppercase;
            font-size: 0.75rem;
        }

        .song-lines span:nth-child(1) { animation-delay: 0s; }
        .song-lines span:nth-child(2) { animation-delay: 4s; }
        .song-lines span:nth-child(3) { animation-delay: 8s; }
        .song-lines span:nth-child(4) { animation-delay: 12s; }

        .hero-song.dancing .song-lines span {
            animation: danceLine 1s ease-in-out infinite;
        }

        .hero-song.dancing .song-lines span:nth-child(1) { animation-delay: 0s; }
        .hero-song.dancing .song-lines span:nth-child(2) { animation-delay: 0.15s; }
        .hero-song.dancing .song-lines span:nth-child(3) { animation-delay: 0.3s; }
        .hero-song.dancing .song-lines span:nth-child(4) { animation-delay: 0.45s; }

        .hero-visual {
            grid-column: span 5;
            display: flex;
            flex-direction: column;
        }

        .info-card {
            padding: 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            transition: border-color 0.1s, background-color var(--transition-speed), color var(--transition-speed);
        }

        .info-card:hover {
            border-color: var(--neon-cyan);
        }

        .info-card h3 {
            margin: 0 0 0.85rem 0;
            font-size: 0.875rem;
            font-family: 'JetBrains Mono', monospace;
            color: var(--neon-cyan);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .info-card p {
            margin: 0;
            font-size: 0.92rem;
            line-height: 1.65;
            color: var(--txt-muted);
        }

        .fact-list {
            margin: 0;
            padding: 0;
            list-style: none;
            display: grid;
            gap: 0.65rem;
        }

        .fact-list li {
            padding-left: 1.2rem;
            position: relative;
            font-size: 0.92rem;
            line-height: 1.6;
            color: var(--txt-muted);
        }

        .fact-list li::before {
            content: ">";
            position: absolute;
            left: 0;
            color: var(--neon-magenta);
            font-weight: bold;
        }

        .section {
            margin-top: 5rem;
            position: relative;
        }

        .section-header {
            text-align: center;
            max-width: 720px;
            margin: 0 auto 3rem;
        }

        .section-header h2 {
            font-family: "JetBrains Mono", monospace;
            font-size: clamp(1.5rem, 2vw + 1rem, 2.5rem);
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .section-header p {
            color: var(--txt-muted);
            line-height: 1.7;
            font-size: 1.1rem;
        }

        .anthem {
            padding: 3rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            transition: border-color 0.1s, background-color var(--transition-speed), color var(--transition-speed);
        }

        .anthem-lyrics {
            list-style: none;
            display: grid;
            gap: 0.8rem;
            margin-top: 2rem;
        }

        .anthem-lyrics li {
            padding: 1.2rem 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            transition: border-color 0.1s, background-color var(--transition-speed), color var(--transition-speed);
            cursor: pointer;
            font-weight: 700;
            letter-spacing: 0.02em;
        }

        .anthem-lyrics li:hover {
            border-color: var(--neon-yellow);
        }

        .anthem-lyrics.dancing li {
            animation: bounce 0.8s ease-in-out infinite alternate;
        }

        .anthem-lyrics.dancing li:nth-child(2) { animation-delay: 0.1s; }
        .anthem-lyrics.dancing li:nth-child(3) { animation-delay: 0.2s; }
        .anthem-lyrics.dancing li:nth-child(4) { animation-delay: 0.3s; }

        .value-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 1.6rem;
        }

        .glass-card {
            padding: 2rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            position: relative;
            transition: border-color 0.1s, background-color var(--transition-speed), color var(--transition-speed);
        }

        .glass-card:hover {
            border-color: var(--neon-cyan);
        }

        .glass-card h3 {
            font-size: 0.875rem;
            margin-bottom: 0.85rem;
            font-family: "JetBrains Mono", monospace;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--neon-cyan);
        }

        .glass-card p {
            color: var(--txt-muted);
            line-height: 1.7;
        }

        .architecture-container {
            padding: 3rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            transition: border-color 0.1s, background-color var(--transition-speed), color var(--transition-speed);
        }

        .architecture-container svg {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Light theme SVG overrides */
        :root[data-theme="light"] .architecture-container svg rect[fill="#000000"] {
            fill: var(--bg-card);
        }

        :root[data-theme="light"] .architecture-container svg text[fill="#808080"] {
            fill: var(--txt-muted);
        }

        :root[data-theme="light"] .architecture-container svg text[fill="#ffff00"] {
            fill: var(--neon-yellow);
        }

        :root[data-theme="light"] .architecture-container svg rect[stroke="#ffff00"] {
            stroke: var(--neon-yellow);
        }

        :root[data-theme="light"] .architecture-container svg path[stroke="#ffff00"] {
            stroke: var(--neon-yellow);
        }

        :root[data-theme="light"] .architecture-container svg line[stroke="#ffff00"] {
            stroke: var(--neon-yellow);
        }

        :root[data-theme="light"] .architecture-container svg polygon[fill="#ffff00"] {
            fill: var(--neon-yellow);
        }

        /* Light theme SVG cyan overrides */
        :root[data-theme="light"] .architecture-container svg text[fill="#00ffff"] {
            fill: var(--neon-cyan);
        }

        :root[data-theme="light"] .architecture-container svg rect[stroke="#00ffff"] {
            stroke: var(--neon-cyan);
        }

        :root[data-theme="light"] .architecture-container svg path[stroke="#00ffff"] {
            stroke: var(--neon-cyan);
        }

        :root[data-theme="light"] .architecture-container svg polygon[fill="#00ffff"] {
            fill: var(--neon-cyan);
        }

        /* Animated Diagram Styles */
        .diagram-wrapper {
            width: 100%;
        }

        .diagram-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .diagram-tab {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--txt-muted);
            font-family: "JetBrains Mono", monospace;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 0.6rem 1.2rem;
            cursor: pointer;
            transition: all 0.15s;
        }

        .diagram-tab::before { content: "["; }
        .diagram-tab::after { content: "]"; }

        .diagram-tab:hover {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
        }

        .diagram-tab.active {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
            background: rgba(0, 255, 255, 0.05);
        }

        .diagram-subtitle {
            font-size: 0.75rem;
            color: var(--neon-yellow);
            margin-bottom: 1rem;
        }

        .diagram-container {
            border: 1px solid var(--border-color);
            background: var(--bg-card);
        }

        .diagram-title-bar {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.15em;
            color: var(--neon-cyan);
            text-transform: uppercase;
        }

        .diagram-view {
            display: none;
            position: relative;
            min-height: 380px;
            padding: 1.5rem;
        }

        .diagram-view.active {
            display: block;
        }

        .diagram-canvas {
            position: relative;
            width: 800px;
            max-width: 100%;
            height: 300px;
            margin: 0 auto;
            overflow: visible;
        }

        .diagram-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .diagram-node {
            position: absolute;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            opacity: 0.5;
        }

        .diagram-node.active {
            opacity: 1;
            border-color: var(--neon-cyan);
        }

        .diagram-node.highlight-yellow {
            border-color: var(--neon-yellow);
        }

        .diagram-node.highlight-magenta {
            border-color: var(--neon-magenta);
        }

        .diagram-node-header {
            padding: 0.4rem 0.6rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.65rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--txt-muted);
            text-align: center;
        }

        .diagram-node.active .diagram-node-header {
            color: var(--neon-cyan);
        }

        .diagram-node.highlight-yellow .diagram-node-header {
            color: var(--neon-yellow);
        }

        .diagram-node-body {
            padding: 0.5rem 0.6rem;
            font-size: 0.65rem;
        }

        .diagram-node-status {
            color: var(--txt-muted);
        }

        .diagram-node.active .diagram-node-status {
            color: var(--neon-cyan);
        }

        .diagram-node-status.status-yellow {
            color: var(--neon-yellow);
        }

        .diagram-node-status.status-red {
            color: var(--neon-red);
        }

        .diagram-terminal {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            font-size: 0.7rem;
        }

        .diagram-terminal-header {
            padding: 0.4rem 0.6rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--neon-cyan);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .diagram-terminal-body {
            padding: 0.6rem;
        }

        .diagram-terminal-line {
            margin-bottom: 0.25rem;
        }

        .diagram-terminal-prompt {
            color: var(--neon-cyan);
        }

        .diagram-terminal-cmd {
            color: var(--neon-yellow);
        }

        .diagram-terminal-arg {
            color: var(--txt-muted);
        }

        .diagram-sandbox {
            border: 1px dashed var(--neon-yellow);
            padding: 0.5rem;
        }

        .diagram-sandbox-label {
            font-size: 0.6rem;
            color: var(--neon-yellow);
            margin-bottom: 0.4rem;
        }

        .diagram-return-label {
            position: absolute;
            font-size: 0.65rem;
            padding: 0.3rem 0.6rem;
            border: 1px solid var(--border-color);
            background: var(--bg-card);
            color: var(--txt-muted);
        }

        .diagram-return-label.active {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
        }

        .diagram-diff {
            background: var(--bg-card);
            border: 1px solid var(--neon-cyan);
            font-size: 0.65rem;
        }

        .diagram-diff-header {
            padding: 0.4rem 0.6rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--neon-cyan);
        }

        .diagram-diff-body {
            padding: 0.5rem 0.6rem;
        }

        .diagram-diff-remove {
            color: var(--neon-red);
        }

        .diagram-diff-add {
            color: var(--neon-cyan);
        }

        .diagram-diff-actions {
            display: flex;
            border-top: 1px solid var(--border-color);
            font-size: 0.6rem;
        }

        .diagram-diff-action {
            flex: 1;
            padding: 0.4rem;
            text-align: center;
            color: var(--neon-cyan);
        }

        .diagram-diff-action:first-child {
            border-right: 1px solid var(--border-color);
        }

        .diagram-diff-action.muted {
            color: var(--txt-muted);
        }

        .diagram-step-bar {
            display: flex;
            justify-content: center;
            gap: 0.25rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .diagram-step-item {
            padding: 0.4rem 0.6rem;
            border: 1px solid var(--border-color);
            font-size: 0.6rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--txt-muted);
            transition: all 0.2s;
        }

        .diagram-step-item.active {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
            background: rgba(0, 255, 255, 0.05);
        }

        .diagram-step-item.completed {
            border-color: var(--neon-green);
            color: var(--neon-green);
        }

        .diagram-controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .diagram-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--txt-main);
            font-family: "JetBrains Mono", monospace;
            font-size: 0.65rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.15s;
        }

        .diagram-btn::before { content: "["; }
        .diagram-btn::after { content: "]"; }

        .diagram-btn:hover {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
        }

        .diagram-btn.btn-primary {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
        }

        .diagram-legend {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
            font-size: 0.65rem;
            color: var(--txt-muted);
        }

        .diagram-legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .diagram-legend-box {
            width: 12px;
            height: 12px;
            border: 1px solid;
        }

        .diagram-legend-box.legend-red {
            border-color: var(--neon-red);
        }

        .diagram-legend-box.legend-yellow {
            border-color: var(--neon-yellow);
            background: rgba(255, 255, 0, 0.1);
        }

        /* SVG line styles */
        .diagram-line {
            stroke: var(--border-color);
            stroke-width: 1;
            fill: none;
        }

        .diagram-line.active {
            stroke: var(--neon-cyan);
            stroke-width: 2;
            stroke-dasharray: 6 3;
            animation: dashFlow 0.5s linear infinite;
        }

        .diagram-line.completed {
            stroke: var(--neon-cyan);
            stroke-width: 1;
        }

        .diagram-line.return-path {
            stroke-dasharray: 8 4;
            opacity: 0;
        }

        .diagram-line.return-path.active {
            stroke: var(--neon-cyan);
            opacity: 1;
            animation: dashFlowReverse 1.5s ease-out forwards;
        }

        @keyframes dashFlow {
            to { stroke-dashoffset: -12; }
        }

        @keyframes dashFlowReverse {
            from { stroke-dashoffset: 200; }
            to { stroke-dashoffset: 0; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        /* Responsive scaling for diagrams - use overflow scroll on mobile */
        @media (max-width: 850px) {
            .diagram-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            .diagram-view {
                min-height: auto;
                padding: 1rem;
            }
            .diagram-canvas {
                min-width: 800px;
            }
            .diagram-step-bar {
                gap: 0.15rem;
            }
            .diagram-step-item {
                padding: 0.3rem 0.4rem;
                font-size: 0.55rem;
            }
        }

        @media (max-width: 650px) {
            .diagram-step-item {
                padding: 0.2rem 0.3rem;
                font-size: 0.5rem;
            }
        }

        @media (max-width: 450px) {
            .diagram-tabs {
                gap: 0.3rem;
            }
            .diagram-tab {
                padding: 0.4rem 0.6rem;
                font-size: 0.55rem;
            }
            .diagram-step-item {
                padding: 0.15rem 0.2rem;
                font-size: 0.45rem;
            }
        }

        footer {
            padding: 4rem 0 3rem;
            color: var(--txt-muted);
            text-align: center;
            font-size: 0.625rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 700;
            border-top: 1px solid var(--border-color);
        }

        footer a {
            color: var(--neon-cyan);
            text-decoration: none;
            transition: color 0.1s;
        }

        footer a:hover {
            color: var(--neon-yellow);
        }

        @keyframes songCycle {
            0% { opacity: 0; transform: translateY(12px); }
            10% { opacity: 1; transform: translateY(0); }
            25% { opacity: 1; transform: translateY(0); }
            35% { opacity: 0; transform: translateY(-12px); }
            100% { opacity: 0; transform: translateY(-12px); }
        }

        @keyframes danceLine {
            0%, 100% { opacity: 1; transform: translateX(0) scale(1); }
            50% { opacity: 0.9; transform: translateX(8px) scale(1.05); }
        }

        @keyframes bounce {
            0% { transform: translateX(0); }
            100% { transform: translateX(12px); }
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        @media (max-width: 1080px) {
            nav {
                display: none;
            }
            .hero {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }
            .hero-content {
                grid-column: span 1;
            }
            .hero-visual {
                grid-column: span 1;
            }
        }

        @media (max-width: 720px) {
            header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5rem;
            }
            .header-actions {
                width: 100%;
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
            .theme-toggle {
                width: 100%;
                justify-content: space-between;
            }
            .cta-buttons {
                width: 100%;
                flex-direction: column;
            }
            .cta-buttons .btn {
                width: 100%;
                justify-content: center;
            }
            .hero {
                padding-top: 3.5rem;
            }
            .hero-content p {
                font-size: 1rem;
            }
        }

        /* Installation command blocks */
        .install-section {
            margin-top: 2rem;
        }

        .install-title {
            font-size: 0.75rem;
            color: var(--neon-cyan);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .command-block {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
            transition: border-color 0.1s, background-color var(--transition-speed);
        }

        .command-block:hover {
            border-color: var(--neon-cyan);
        }

        .command-block code {
            color: var(--neon-yellow);
            font-family: "JetBrains Mono", monospace;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .command-block .step-num {
            color: var(--neon-magenta);
            margin-right: 0.75rem;
            font-weight: 700;
        }

        .copy-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--txt-muted);
            padding: 0.35rem 0.75rem;
            font-family: "JetBrains Mono", monospace;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.1s;
            flex-shrink: 0;
            margin-left: 1rem;
        }

        .copy-btn:hover {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
        }

        .copy-btn.copied {
            border-color: var(--neon-green);
            color: var(--neon-green);
        }

        @media (max-width: 720px) {
            .command-block {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            .command-block code {
                white-space: normal;
                word-break: break-all;
            }
            .copy-btn {
                margin-left: 0;
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <main>
        <header>
            <div class="logo">HOKI-POKI.AI</div>
            <nav>
                <a href="#architecture-diagram">How It Works</a>
                <a href="#anthem">Anthem</a>
                <a href="#value">The Dance</a>
                <a href="#use-cases">Use Cases</a>
                <a href="#architecture">Architecture</a>
            </nav>
            <div class="header-actions">
                <button type="button" class="theme-toggle" id="theme-toggle" aria-pressed="false">
                    <span class="toggle-pill" aria-hidden="true">
                        <span class="toggle-thumb"></span>
                    </span>
                    <span class="toggle-label">Theme: <span id="theme-toggle-status">DARK</span></span>
                </button>
                <span class="tagline">The Model Hop</span>
            </div>
        </header>

        <section class="hero">
            <div class="hero-content">
                <h1>When one model can't. <span class="gradient">Maybe another can.</span></h1>
                <p>Every developer knows the dance: AI gets stuck, copy everything, paste into a different model, lose half your context, start over. HokiPoki keeps you in the same terminal, same context, different brain. One command to hop. Works solo with your own models, or invite teammates to share theirs. Named after a children's dance because good tools don't take themselves too seriously.</p>

                <div class="hero-song" id="anthem-preview" onclick="toggleDance(this)">
                    <span class="song-label">The HokiPoki Anthem</span>
                    <div class="song-lines">
                        <span>♫ You put your MODEL in...</span>
                        <span>♫ You pull your PROMPT out...</span>
                        <span>♫ You share it ALL AROUND...</span>
                        <span>♫ That's what it's ALL ABOUT!</span>
                    </div>
                </div>

                <div class="install-section">
                    <div class="install-title" style="display: flex; align-items: center; gap: 1rem;">
                        Get Started
                        <a href="https://github.com/Next-Halo/hokipoki-cli" target="_blank" title="GitHub" style="color: var(--txt-muted); transition: color 0.1s;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                        </a>
                    </div>

                    <div class="command-block">
                        <div><span class="step-num">0.</span><code>Create account</code></div>
                        <a href="https://app.hoki-poki.ai/register" target="_blank" class="copy-btn" style="text-decoration: none;">Register</a>
                    </div>

                    <div class="command-block">
                        <div><span class="step-num">$</span><code>npm install -g @next-halo/hokipoki-cli</code></div>
                        <button class="copy-btn" onclick="copyCommand(this, 'npm install -g @next-halo/hokipoki-cli')">Copy</button>
                    </div>

                    <div class="command-block">
                        <div><span class="step-num">1.</span><code>hokipoki login</code></div>
                        <button class="copy-btn" onclick="copyCommand(this, 'hokipoki login')">Copy</button>
                    </div>

                    <div class="command-block">
                        <div><span class="step-num">2.</span><code>hokipoki register --as-provider --tools claude codex gemini</code></div>
                        <button class="copy-btn" onclick="copyCommand(this, 'hokipoki register --as-provider --tools claude codex gemini')">Copy</button>
                    </div>

                    <div class="command-block">
                        <div><span class="step-num">3.</span><code>hokipoki listen --tools claude codex gemini</code></div>
                        <button class="copy-btn" onclick="copyCommand(this, 'hokipoki listen --tools claude codex gemini')">Copy</button>
                    </div>

                    <div class="command-block">
                        <div><span class="step-num">4.</span><code>hokipoki request \<br>&nbsp;&nbsp;--tool claude \<br>&nbsp;&nbsp;--task "Fix the bug" \<br>&nbsp;&nbsp;--files src/auth.ts</code></div>
                        <button class="copy-btn" onclick="copyCommand(this, 'hokipoki request --tool claude --task &quot;Fix the bug&quot; --files src/auth.ts')">Copy</button>
                    </div>

                    <div class="command-block">
                        <div><span class="step-num">5.</span><code>hokipoki request \<br>&nbsp;&nbsp;--tool claude \<br>&nbsp;&nbsp;--task "Fix the bug" \<br>&nbsp;&nbsp;--files src/auth.ts \<br>&nbsp;&nbsp;--workspace next-halo</code></div>
                        <button class="copy-btn" onclick="copyCommand(this, 'hokipoki request --tool claude --task &quot;Fix the bug&quot; --files src/auth.ts --workspace next-halo')">Copy</button>
                    </div>

                    <p style="font-size: 0.7rem; color: var(--txt-muted); margin-top: 0.75rem; font-style: italic;">
                        * Use only the tools you have access to (e.g., --tools claude or --tools codex gemini)
                    </p>
                </div>

                <div class="cta-buttons">
                    <button class="btn btn-primary" onclick="document.getElementById('use-cases').scrollIntoView({behavior: 'smooth'})">See How It Works</button>
                    <button class="btn btn-secondary" onclick="document.getElementById('anthem').scrollIntoView({behavior: 'smooth'})">Do The Dance</button>
                </div>
            </div>
            <div class="hero-visual">
                <div style="display: grid; gap: 1.25rem;">
                    <div class="info-card">
                        <h3>How It Works</h3>
                        <p>One command. Different model. Same context. No copy-paste.</p>
                    </div>

                    <div class="info-card">
                        <h3>Supported CLI Tools</h3>
                        <ul class="fact-list">
                            <li>Claude Code CLI</li>
                            <li>Gemini CLI</li>
                            <li>Codex CLI</li>
                            <li style="color: var(--neon-yellow);">More upcoming...</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h3>The Setup</h3>
                        <ul class="fact-list">
                            <li>Solo with your models, or pooled with your team's</li>
                            <li>Your workspace, your rules</li>
                            <li>API keys never leave your machine</li>
                            <li>Everything stays encrypted, everything stays ephemeral</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="section" id="architecture-diagram">
            <div class="section-header">
                <h2>How It Actually Works</h2>
                <p>Your models. Your team's models. One terminal.</p>
            </div>
            <div class="diagram-wrapper">
                <!-- Tab Navigation -->
                <div class="diagram-tabs">
                    <button class="diagram-tab active" data-view="ai-to-ai">AI CLI - TO - AI CLI</button>
                    <button class="diagram-tab" data-view="human-terminal">Human Terminal</button>
                    <button class="diagram-tab" data-view="workspace">Workspace Sharing</button>
                </div>

                <!-- Subtitle (dynamic) -->
                <div class="diagram-subtitle" id="diagram-subtitle">// When Claude gets stuck, hop to Gemini</div>

                <!-- Diagram Container -->
                <div class="diagram-container">
                    <div class="diagram-title-bar" id="diagram-title-bar">AI-to-AI Flow</div>

                    <!-- AI-to-AI View -->
                    <div class="diagram-view active" id="view-ai-to-ai">
                        <div class="diagram-canvas" style="height: 420px;">
                            <svg class="diagram-svg" viewBox="0 0 800 420" preserveAspectRatio="xMidYMid meet">
                                <!-- Forward lines: connect right edge of one node to left edge of next (centered vertically at y=180) -->
                                <line id="ai-line-1" class="diagram-line" x1="160" y1="180" x2="195" y2="180"/>
                                <polygon id="ai-arrow-1" class="diagram-arrow-head" points="190,175 200,180 190,185" fill="var(--border-color)"/>
                                <line id="ai-line-2" class="diagram-line" x1="300" y1="180" x2="335" y2="180"/>
                                <polygon id="ai-arrow-2" class="diagram-arrow-head" points="330,175 340,180 330,185" fill="var(--border-color)"/>
                                <line id="ai-line-3" class="diagram-line" x1="440" y1="180" x2="475" y2="180"/>
                                <polygon id="ai-arrow-3" class="diagram-arrow-head" points="470,175 480,180 470,185" fill="var(--border-color)"/>
                                <line id="ai-line-4" class="diagram-line" x1="580" y1="180" x2="615" y2="180"/>
                                <polygon id="ai-arrow-4" class="diagram-arrow-head" points="610,175 620,180 610,185" fill="var(--border-color)"/>
                                <!-- Return path: curves below all nodes -->
                                <path id="ai-return" class="diagram-line return-path" d="M 720 220 L 720 380 L 60 380 L 60 220" fill="none"/>
                            </svg>

                            <!-- Nodes: centered in 800px canvas, vertically centered -->
                            <div class="diagram-node" id="ai-node-0" style="left: 60px; top: 150px; width: 100px;">
                                <div class="diagram-node-header">Claude Code</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status" id="ai-status-0">> waiting</div>
                                </div>
                            </div>
                            <div class="diagram-node" id="ai-node-1" style="left: 200px; top: 150px; width: 100px;">
                                <div class="diagram-node-header">HokiPoki</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status" id="ai-status-1">> hop</div>
                                    <div class="diagram-node-status" id="ai-auth-status" style="display: none;">> auth</div>
                                </div>
                            </div>
                            <div class="diagram-node" id="ai-node-2" style="left: 340px; top: 150px; width: 100px;">
                                <div class="diagram-node-header">[Relay]</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status">> routing</div>
                                </div>
                            </div>
                            <div class="diagram-node" id="ai-node-3" style="left: 480px; top: 150px; width: 100px;">
                                <div class="diagram-node-header">Provider</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status">> sandbox</div>
                                </div>
                            </div>
                            <div class="diagram-node" id="ai-node-4" style="left: 620px; top: 150px; width: 100px;">
                                <div class="diagram-node-header">Gemini CLI</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status" id="ai-status-4">> ready</div>
                                </div>
                            </div>

                            <!-- Floating labels -->
                            <div class="diagram-return-label" id="ai-label-request" style="left: 170px; top: 125px; display: none;">[REQUEST]</div>
                            <div class="diagram-return-label" id="ai-label-patch" style="left: 370px; top: 355px; display: none;">[PATCH]</div>
                        </div>

                        <!-- Step bar -->
                        <div class="diagram-step-bar" id="ai-step-bar">
                            <div class="diagram-step-item" data-step="0">Stuck</div>
                            <div class="diagram-step-item" data-step="1">Hop</div>
                            <div class="diagram-step-item" data-step="2">Auth</div>
                            <div class="diagram-step-item" data-step="3">Route</div>
                            <div class="diagram-step-item" data-step="4">Sandbox</div>
                            <div class="diagram-step-item" data-step="5">Solve</div>
                            <div class="diagram-step-item" data-step="6">Apply</div>
                        </div>
                    </div>

                    <!-- Human Terminal View -->
                    <div class="diagram-view" id="view-human-terminal">
                        <div class="diagram-canvas" style="height: 420px;">
                            <svg class="diagram-svg" viewBox="0 0 800 420" preserveAspectRatio="xMidYMid meet">
                                <!-- Vertical flow: Terminal → HokiPoki → Relay -->
                                <line id="ht-line-1" class="diagram-line" x1="195" y1="120" x2="195" y2="155"/>
                                <polygon id="ht-arrow-1" class="diagram-arrow-head" points="190,150 195,160 200,150" fill="var(--border-color)"/>
                                <line id="ht-line-2" class="diagram-line" x1="195" y1="220" x2="195" y2="255"/>
                                <polygon id="ht-arrow-2" class="diagram-arrow-head" points="190,250 195,260 200,250" fill="var(--border-color)"/>
                                <!-- Horizontal from Relay right edge to Sandbox left edge (y=295 = center of boxes) -->
                                <line id="ht-line-3" class="diagram-line" x1="255" y1="295" x2="370" y2="295"/>
                                <polygon id="ht-arrow-3" class="diagram-arrow-head" points="365,290 375,295 365,300" fill="var(--border-color)"/>
                                <!-- From Sandbox right edge to Claude CLI left edge -->
                                <line id="ht-line-4" class="diagram-line" x1="515" y1="295" x2="590" y2="295"/>
                                <polygon id="ht-arrow-4" class="diagram-arrow-head" points="585,290 595,295 585,300" fill="var(--border-color)"/>
                                <!-- Return path: from Claude CLI bottom → below → back to terminal left side -->
                                <path id="ht-return" class="diagram-line return-path" d="M 705 335 L 705 400 L 105 400 L 105 65 L 115 65" fill="none"/>
                            </svg>

                            <!-- Terminal: centered +95px -->
                            <div class="diagram-terminal" id="ht-terminal" style="position: absolute; left: 115px; top: 20px; width: 160px;">
                                <div class="diagram-terminal-header">Your Terminal</div>
                                <div class="diagram-terminal-body">
                                    <div class="diagram-terminal-line"><span class="diagram-terminal-prompt">$</span> <span class="diagram-terminal-cmd">hokipoki request</span></div>
                                    <div class="diagram-terminal-line"><span class="diagram-terminal-cmd">--tool claude</span></div>
                                    <div class="diagram-terminal-line"><span class="diagram-terminal-arg">--task "fix bug"</span></div>
                                    <div class="diagram-terminal-line" id="ht-terminal-result" style="display: none;"><span class="diagram-terminal-prompt">> patch applied!</span></div>
                                </div>
                            </div>

                            <!-- HokiPoki node: centered +95px -->
                            <div class="diagram-node" id="ht-node-1" style="left: 135px; top: 160px; width: 120px;">
                                <div class="diagram-node-header">HokiPoki</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status">> auth</div>
                                </div>
                            </div>

                            <!-- Relay node: centered +95px -->
                            <div class="diagram-node" id="ht-node-2" style="left: 135px; top: 260px; width: 120px;">
                                <div class="diagram-node-header">[Relay]</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status">> routing</div>
                                </div>
                            </div>

                            <!-- Sandbox + Provider: centered +95px -->
                            <div class="diagram-sandbox" id="ht-sandbox" style="position: absolute; left: 375px; top: 260px;">
                                <div class="diagram-sandbox-label">[SANDBOX]</div>
                                <div class="diagram-node" id="ht-node-3" style="position: relative; left: 0; top: 0; width: 110px;">
                                    <div class="diagram-node-header">Provider</div>
                                    <div class="diagram-node-body">
                                        <div class="diagram-node-status">> isolated</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Claude CLI: centered +95px -->
                            <div class="diagram-node" id="ht-node-4" style="left: 595px; top: 270px; width: 110px;">
                                <div class="diagram-node-header">Claude CLI</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status" id="ht-status-4">> ready</div>
                                </div>
                            </div>

                            <!-- Diff preview -->
                            <div class="diagram-diff" id="ht-diff" style="position: absolute; left: 300px; top: 60px; width: 150px; display: none;">
                                <div class="diagram-diff-header">[DIFF PREVIEW]</div>
                                <div class="diagram-diff-body">
                                    <div class="diagram-diff-remove">- old_code()</div>
                                    <div class="diagram-diff-add">+ fixed_code()</div>
                                </div>
                                <div class="diagram-diff-actions">
                                    <div class="diagram-diff-action">[APPLY]</div>
                                    <div class="diagram-diff-action muted">[SKIP]</div>
                                </div>
                            </div>
                        </div>

                        <!-- Step bar -->
                        <div class="diagram-step-bar" id="ht-step-bar">
                            <div class="diagram-step-item" data-step="0">Request</div>
                            <div class="diagram-step-item" data-step="1">Auth</div>
                            <div class="diagram-step-item" data-step="2">Route</div>
                            <div class="diagram-step-item" data-step="3">Sandbox</div>
                            <div class="diagram-step-item" data-step="4">Process</div>
                            <div class="diagram-step-item" data-step="5">Return</div>
                            <div class="diagram-step-item" data-step="6">Apply</div>
                        </div>
                    </div>

                    <!-- Workspace Sharing View -->
                    <div class="diagram-view" id="view-workspace">
                        <div class="diagram-canvas" style="height: 420px;">
                            <svg class="diagram-svg" viewBox="0 0 800 420" preserveAspectRatio="xMidYMid meet">
                                <!-- Lines from requesters to relay: connect right edge to left edge (shifted down +50px) -->
                                <line id="ws-line-bob" class="diagram-line" x1="180" y1="105" x2="340" y2="195"/>
                                <line id="ws-line-carol" class="diagram-line" x1="180" y1="185" x2="340" y2="205"/>
                                <line id="ws-line-dan" class="diagram-line" x1="180" y1="265" x2="340" y2="215"/>
                                <!-- Lines from relay to providers: connect right edge to left edge -->
                                <line id="ws-line-alice" class="diagram-line" x1="460" y1="195" x2="570" y2="115"/>
                                <line id="ws-line-eve" class="diagram-line" x1="460" y1="215" x2="570" y2="235"/>
                                <!-- Return paths: curve BELOW the diagram (via y=380-400) -->
                                <path id="ws-return-1" class="diagram-line return-path" d="M 700 140 L 720 140 L 720 385 L 60 385 L 60 105 L 70 105" fill="none"/>
                                <path id="ws-return-2" class="diagram-line return-path" d="M 700 250 L 730 250 L 730 395 L 55 395 L 55 185 L 70 185" fill="none"/>
                                <path id="ws-return-3" class="diagram-line return-path" d="M 700 260 L 740 260 L 740 405 L 50 405 L 50 265 L 70 265" fill="none"/>
                            </svg>

                            <!-- Requesters (left) - shifted down +50px -->
                            <div class="diagram-node" id="ws-node-bob" style="left: 70px; top: 80px; width: 110px;">
                                <div class="diagram-node-header">Bob</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status status-red">no sub</div>
                                    <div class="diagram-node-status" id="ws-bob-result" style="display: none;">> got it!</div>
                                </div>
                            </div>
                            <div class="diagram-node" id="ws-node-carol" style="left: 70px; top: 160px; width: 110px;">
                                <div class="diagram-node-header">Carol</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status status-red">no sub</div>
                                    <div class="diagram-node-status" id="ws-carol-result" style="display: none;">> got it!</div>
                                </div>
                            </div>
                            <div class="diagram-node" id="ws-node-dan" style="left: 70px; top: 240px; width: 110px;">
                                <div class="diagram-node-header">Dan</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status status-red">no sub</div>
                                    <div class="diagram-node-status" id="ws-dan-result" style="display: none;">> got it!</div>
                                </div>
                            </div>

                            <!-- Relay (center) - shifted down +50px -->
                            <div class="diagram-node" id="ws-node-relay" style="left: 340px; top: 170px; width: 120px;">
                                <div class="diagram-node-header">[Relay]</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status" id="ws-relay-status">> conductor</div>
                                    <div class="diagram-node-status" id="ws-auth-status" style="display: none;">> auth</div>
                                    <div class="diagram-node-status" style="color: var(--txt-muted);">routes tasks</div>
                                </div>
                            </div>

                            <!-- Providers (right) - shifted down +50px -->
                            <div class="diagram-node highlight-yellow" id="ws-node-alice" style="left: 570px; top: 80px; width: 130px;">
                                <div class="diagram-node-header">Alice</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status status-yellow">CLAUDE MAX</div>
                                    <div class="diagram-node-status" id="ws-alice-status">CLAUDE CLI</div>
                                </div>
                            </div>
                            <div class="diagram-node highlight-yellow" id="ws-node-eve" style="left: 570px; top: 200px; width: 130px;">
                                <div class="diagram-node-header">Eve</div>
                                <div class="diagram-node-body">
                                    <div class="diagram-node-status status-yellow">GEMINI PRO</div>
                                    <div class="diagram-node-status" id="ws-eve-status">GEMINI CLI</div>
                                </div>
                            </div>

                            <!-- Info text -->
                            <div class="diagram-return-label" id="ws-info" style="left: 280px; top: 55px;">// authenticating with relay</div>
                        </div>

                        <!-- Legend -->
                        <div class="diagram-legend">
                            <div class="diagram-legend-item">
                                <div class="diagram-legend-box legend-red"></div>
                                <span>no subscription</span>
                            </div>
                            <div class="diagram-legend-item">
                                <div class="diagram-legend-box legend-yellow"></div>
                                <span>has subscription</span>
                            </div>
                        </div>

                        <!-- Step bar -->
                        <div class="diagram-step-bar" id="ws-step-bar">
                            <div class="diagram-step-item" data-step="0">Request</div>
                            <div class="diagram-step-item" data-step="1">Auth</div>
                            <div class="diagram-step-item" data-step="2">Route</div>
                            <div class="diagram-step-item" data-step="3">Match</div>
                            <div class="diagram-step-item" data-step="4">Execute</div>
                            <div class="diagram-step-item" data-step="5">Return</div>
                            <div class="diagram-step-item" data-step="6">Success</div>
                        </div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="diagram-controls">
                    <button class="diagram-btn" id="diagram-play-pause">Pause</button>
                    <button class="diagram-btn" id="diagram-restart">Restart</button>
                    <button class="diagram-btn btn-primary" id="diagram-next">Next Step ></button>
                </div>
            </div>
        </section>

        <section class="section" id="demo">
            <div class="section-header">
                <h2>See It In Action</h2>
                <p>Watch how model hopping works in practice.</p>
            </div>
            <div class="architecture-container">
                <div style="position: relative; width: 100%; padding-bottom: 56.25%; height: 0; overflow: hidden;">
                    <iframe
                        src="https://www.youtube.com/embed/YOW43Vg2oVM"
                        title="HokiPoki Demo"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                    </iframe>
                </div>
            </div>
        </section>

        <section class="section" id="anthem">
            <div class="anthem">
                <div class="section-header">
                    <h2>The Full HokiPoki Dance</h2>
                    <p>A children's song about hopping between AI models. We're serious.</p>
                </div>
                <ul class="anthem-lyrics" id="full-anthem" onclick="toggleAnthemDance()">
                    <li>♫ You put your MODEL in, you pull another out, you hop between your AIs when one figures nothing out!</li>
                    <li>♫ You keep the same CONTEXT, just switch the thinking part, no copy-paste between terminals like some kind of ancient art!</li>
                    <li>♫ You invite your TEAMMATES, they bring their models too, everyone shares everything but the APIs stay with you!</li>
                    <li>♫ The relay routes your PROBLEMS, P2P brings solutions back, encrypted and ephemeral on the collaboration track!</li>
                    <li>♫ You do the HOKIPOKI and you code your way about—THAT'S WHAT IT'S ALL ABOUT!</li>
                </ul>
            </div>
        </section>

        <section class="section" id="value">
            <div class="section-header">
                <h2>What Actually Happens</h2>
                <p>Four things. Nothing revolutionary. Just useful.</p>
            </div>
            <div class="value-grid">
                <div class="glass-card">
                    <h3>Connect Your Models</h3>
                    <p>Register your AI CLIs. They're now hoppable.</p>
                </div>
                <div class="glass-card">
                    <h3>Invite Your Team</h3>
                    <p>Optional. Share access to models without sharing API keys.</p>
                </div>
                <div class="glass-card">
                    <h3>Hop When Stuck</h3>
                    <p>One command. Same problem, different model. Context preserved.</p>
                </div>
                <div class="glass-card">
                    <h3>Keep Coding</h3>
                    <p>No tabs. No copying. No context loss. Just progress.</p>
                </div>
            </div>
        </section>

        <section class="section" id="use-cases">
            <div class="section-header">
                <h2>Three Ways to Dance</h2>
                <p>Solo, duet, or full ensemble.</p>
            </div>
            <div class="value-grid">
                <div class="glass-card">
                    <h3>Solo Performance</h3>
                    <p>Your models. Your problems. Hop between them as needed.</p>
                </div>
                <div class="glass-card">
                    <h3>Team Duet</h3>
                    <p>You have one model. They have another. Share access, not keys.</p>
                </div>
                <div class="glass-card">
                    <h3>Full Ensemble</h3>
                    <p>Whole team pools models. Everyone accesses everything. Workspaces keep it organized.</p>
                </div>
            </div>
        </section>

        <section class="section" id="architecture">
            <div class="section-header">
                <h2>The Technical Dance</h2>
                <p>How we keep your moves secure.</p>
            </div>
            <div class="value-grid">
                <div class="glass-card">
                    <h3>Workspace Control</h3>
                    <p>Your private space. Invite who you want. Revoke anytime.</p>
                </div>
                <div class="glass-card">
                    <h3>Relay Orchestration</h3>
                    <p>Routes tasks to the right model. Central brain, distributed execution.</p>
                </div>
                <div class="glass-card">
                    <h3>P2P Execution</h3>
                    <p>Team member's models run on their machines. Results come back encrypted.</p>
                </div>
                <div class="glass-card">
                    <h3>Ephemeral Everything</h3>
                    <p>Git repos exist per-task. Then vanish. No traces, no cleanup.</p>
                </div>
            </div>
        </section>

        <section class="section" id="contact">
            <div style="text-align: center; padding: 2rem 0;">
                <p style="font-size: 0.875rem; color: var(--txt-muted); line-height: 1.7;">
                    Questions about hopping between AI CLIs? Reach out at <a href="mailto:office@next-halo.com" style="color: var(--neon-cyan); text-decoration: none;">office@next-halo.com</a>
                </p>
            </div>
        </section>
    </main>

    <footer>
        Sometimes you need a different perspective. That's the whole thing. © 2025 HokiPoki. <a href="#anthem">Do the dance.</a>
        <br><br>
        <span style="font-size: 0.5rem;">Created by <a href="https://next-halo.com" target="_blank">next-halo.com</a></span>
    </footer>

    <script>
        const THEME_STORAGE_KEY = 'hokipoki-theme';
        const THEME_MEDIA_QUERY = window.matchMedia ? window.matchMedia('(prefers-color-scheme: light)') : null;

        const getStoredTheme = () => {
            try {
                const saved = localStorage.getItem(THEME_STORAGE_KEY);
                if (saved === 'light' || saved === 'dark') {
                    return saved;
                }
            } catch (error) {
                return null;
            }
            return null;
        };

        const setStoredTheme = (theme) => {
            try {
                localStorage.setItem(THEME_STORAGE_KEY, theme);
            } catch (error) {
                // Ignore storage errors
            }
        };

        const applyTheme = (theme, { persist = false } = {}) => {
            const safeTheme = theme === 'light' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', safeTheme);

            const toggleButton = document.getElementById('theme-toggle');
            const statusLabel = document.getElementById('theme-toggle-status');
            if (toggleButton) {
                toggleButton.setAttribute('aria-pressed', safeTheme === 'light');
                toggleButton.classList.toggle('is-light', safeTheme === 'light');
            }
            if (statusLabel) {
                statusLabel.textContent = safeTheme === 'light' ? 'LIGHT' : 'DARK';
            }

            const themeMeta = document.querySelector('meta[name="theme-color"]');
            if (themeMeta) {
                themeMeta.setAttribute('content', safeTheme === 'light' ? '#f4f6f8' : '#000000');
            }

            if (persist) {
                setStoredTheme(safeTheme);
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            const storedTheme = getStoredTheme();
            const fallbackTheme = document.documentElement.getAttribute('data-theme') || (THEME_MEDIA_QUERY && THEME_MEDIA_QUERY.matches ? 'light' : 'dark');
            applyTheme(storedTheme || fallbackTheme || 'dark');

            const themeToggleButton = document.getElementById('theme-toggle');
            if (themeToggleButton) {
                themeToggleButton.addEventListener('click', () => {
                    const isLight = document.documentElement.getAttribute('data-theme') === 'light';
                    applyTheme(isLight ? 'dark' : 'light', { persist: true });
                });
            }

            if (THEME_MEDIA_QUERY) {
                const systemThemeListener = (event) => {
                    if (!getStoredTheme()) {
                        applyTheme(event.matches ? 'light' : 'dark');
                    }
                };
                if (THEME_MEDIA_QUERY.addEventListener) {
                    THEME_MEDIA_QUERY.addEventListener('change', systemThemeListener);
                } else if (THEME_MEDIA_QUERY.addListener) {
                    THEME_MEDIA_QUERY.addListener(systemThemeListener);
                }
            }
        });

        function toggleDance(el) {
            el.classList.toggle('dancing');
        }

        function toggleAnthemDance() {
            document.getElementById('full-anthem').classList.toggle('dancing');
        }

        function copyCommand(btn, text) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        // Animated Diagram Controller
        const diagramState = {
            currentView: 'ai-to-ai',
            currentStep: 0,
            isPlaying: true,
            intervalId: null,
            stepDuration: 2000
        };

        const viewConfigs = {
            'ai-to-ai': {
                steps: 7,
                title: 'AI-to-AI Flow',
                subtitle: '// When Claude gets stuck, hop to Gemini'
            },
            'human-terminal': {
                steps: 7,
                title: 'Human Terminal Flow',
                subtitle: '// Request help from any AI tool'
            },
            'workspace': {
                steps: 7,
                title: 'Workspace Sharing Flow',
                subtitle: '// Team shares subscriptions, not credentials'
            }
        };

        function initDiagram() {
            // Setup tabs
            document.querySelectorAll('.diagram-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    switchView(tab.dataset.view);
                });
            });

            // Setup controls
            document.getElementById('diagram-play-pause').addEventListener('click', togglePlayPause);
            document.getElementById('diagram-restart').addEventListener('click', restartAnimation);
            document.getElementById('diagram-next').addEventListener('click', nextStep);

            // Start animation
            playStep(0);
            startAutoPlay();
        }

        function switchView(viewId) {
            diagramState.currentView = viewId;
            diagramState.currentStep = 0;

            // Update tabs
            document.querySelectorAll('.diagram-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.view === viewId);
            });

            // Update views
            document.querySelectorAll('.diagram-view').forEach(view => {
                view.classList.remove('active');
            });
            document.getElementById('view-' + viewId).classList.add('active');

            // Update title and subtitle
            const config = viewConfigs[viewId];
            document.getElementById('diagram-title-bar').textContent = config.title;
            document.getElementById('diagram-subtitle').textContent = config.subtitle;

            // Reset and restart
            resetAllElements();
            playStep(0);

            if (diagramState.isPlaying) {
                stopAutoPlay();
                startAutoPlay();
            }
        }

        function resetAllElements() {
            // Reset all nodes
            document.querySelectorAll('.diagram-node').forEach(node => {
                node.classList.remove('active', 'completed');
            });
            // Reset all lines
            document.querySelectorAll('.diagram-line').forEach(line => {
                line.classList.remove('active', 'completed');
            });
            // Reset all arrow heads
            document.querySelectorAll('.diagram-arrow-head').forEach(arrow => {
                arrow.style.fill = 'var(--border-color)';
            });
            // Hide all floating elements
            document.querySelectorAll('.diagram-return-label').forEach(label => {
                if (label.id !== 'ws-info') label.style.display = 'none';
            });
            // Hide diff preview
            const diff = document.getElementById('ht-diff');
            if (diff) diff.style.display = 'none';
            // Hide terminal result
            const termResult = document.getElementById('ht-terminal-result');
            if (termResult) termResult.style.display = 'none';
            // Hide workspace results
            ['ws-bob-result', 'ws-carol-result', 'ws-dan-result'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.style.display = 'none';
            });
        }

        function playStep(stepIndex) {
            diagramState.currentStep = stepIndex;
            const view = diagramState.currentView;

            // Update step bar
            const stepBar = document.getElementById(view === 'ai-to-ai' ? 'ai-step-bar' : view === 'human-terminal' ? 'ht-step-bar' : 'ws-step-bar');
            if (stepBar) {
                stepBar.querySelectorAll('.diagram-step-item').forEach((item, i) => {
                    item.classList.remove('active', 'completed');
                    if (i < stepIndex) item.classList.add('completed');
                    else if (i === stepIndex) item.classList.add('active');
                });
            }

            // View-specific animations
            if (view === 'ai-to-ai') playAItoAIStep(stepIndex);
            else if (view === 'human-terminal') playHumanTerminalStep(stepIndex);
            else if (view === 'workspace') playWorkspaceStep(stepIndex);
        }

        function playAItoAIStep(step) {
            // Steps: 0=Stuck, 1=Hop, 2=Auth, 3=Route, 4=Sandbox, 5=Solve, 6=Apply
            resetAllElements();
            const $ = id => document.getElementById(id);

            // Always show first node (Claude Code)
            $('ai-node-0').classList.add(step === 0 ? 'active' : 'completed');
            $('ai-node-0').style.opacity = '1';

            if (step === 0) {
                $('ai-status-0').textContent = '> stuck...';
                $('ai-status-0').classList.add('status-yellow');
            } else if (step === 6) {
                $('ai-status-0').textContent = '> applied!';
                $('ai-status-0').classList.remove('status-yellow');
            } else {
                $('ai-status-0').textContent = '> waiting';
                $('ai-status-0').classList.remove('status-yellow');
            }

            // Step 1: Hop - show HokiPoki node
            if (step >= 1) {
                $('ai-node-1').classList.add(step === 1 || step === 2 ? 'active' : 'completed');
                $('ai-node-1').style.opacity = '1';
                $('ai-line-1').classList.add(step === 1 ? 'active' : 'completed');
                $('ai-arrow-1').style.fill = 'var(--neon-cyan)';
                if (step === 1) {
                    $('ai-label-request').style.display = 'block';
                    $('ai-label-request').classList.add('active');
                    $('ai-status-1').style.display = 'block';
                    $('ai-auth-status').style.display = 'none';
                }
            }

            // Step 2: Auth - show auth status on HokiPoki
            if (step === 2) {
                $('ai-status-1').style.display = 'none';
                $('ai-auth-status').style.display = 'block';
            }

            // Step 3: Route - show Relay node
            if (step >= 3) {
                $('ai-node-2').classList.add(step === 3 ? 'active' : 'completed');
                $('ai-node-2').style.opacity = '1';
                $('ai-line-2').classList.add(step === 3 ? 'active' : 'completed');
                $('ai-arrow-2').style.fill = 'var(--neon-cyan)';
            }

            // Step 4: Sandbox - show Provider node
            if (step >= 4) {
                $('ai-node-3').classList.add(step === 4 ? 'active' : 'completed');
                $('ai-node-3').style.opacity = '1';
                $('ai-line-3').classList.add(step === 4 ? 'active' : 'completed');
                $('ai-arrow-3').style.fill = 'var(--neon-cyan)';
            }

            // Step 5: Solve - show Gemini CLI node
            if (step >= 5) {
                $('ai-node-4').classList.add(step === 5 ? 'active' : 'completed');
                $('ai-node-4').style.opacity = '1';
                $('ai-line-4').classList.add(step === 5 ? 'active' : 'completed');
                $('ai-arrow-4').style.fill = 'var(--neon-cyan)';
                $('ai-status-4').textContent = step === 5 ? '> solving!' : '> done';
                if (step === 5) $('ai-status-4').classList.add('status-yellow');
            }

            // Step 6: Apply - show return path
            if (step >= 6) {
                $('ai-return').classList.add('active');
                $('ai-label-patch').style.display = 'block';
                $('ai-label-patch').classList.add('active');
            }
        }

        function playHumanTerminalStep(step) {
            // Steps: 0=Request, 1=Auth, 2=Route, 3=Sandbox, 4=Process, 5=Return, 6=Apply
            resetAllElements();
            const $ = id => document.getElementById(id);

            // Terminal is always visible
            $('ht-terminal').style.borderColor = (step === 0 || step === 6) ? 'var(--neon-cyan)' : 'var(--border-color)';

            // Step 1: Auth - show HokiPoki with auth status (already shows > auth by default)
            if (step >= 1) {
                $('ht-node-1').classList.add(step === 1 ? 'active' : 'completed');
                $('ht-node-1').style.opacity = '1';
                $('ht-line-1').classList.add(step === 1 ? 'active' : 'completed');
                $('ht-arrow-1').style.fill = 'var(--neon-cyan)';
            }

            // Step 2: Route - show Relay
            if (step >= 2) {
                $('ht-node-2').classList.add(step === 2 ? 'active' : 'completed');
                $('ht-node-2').style.opacity = '1';
                $('ht-line-2').classList.add(step === 2 ? 'active' : 'completed');
                $('ht-arrow-2').style.fill = 'var(--neon-cyan)';
            }

            // Step 3: Sandbox - show Provider in sandbox
            if (step >= 3) {
                $('ht-sandbox').style.opacity = '1';
                $('ht-node-3').classList.add(step === 3 ? 'active' : 'completed');
                $('ht-node-3').style.opacity = '1';
                $('ht-line-3').classList.add(step === 3 ? 'active' : 'completed');
                $('ht-arrow-3').style.fill = 'var(--neon-cyan)';
            }

            // Step 4: Process - show Claude CLI
            if (step >= 4) {
                $('ht-node-4').classList.add(step === 4 ? 'active' : 'completed');
                $('ht-node-4').style.opacity = '1';
                $('ht-line-4').classList.add(step === 4 ? 'active' : 'completed');
                $('ht-arrow-4').style.fill = 'var(--neon-cyan)';
                $('ht-status-4').textContent = step === 4 ? '> processing' : '> done';
            }

            // Step 5: Return - show return path
            if (step >= 5) {
                $('ht-return').classList.add('active');
            }

            // Step 6: Apply - show diff preview and result
            if (step >= 6) {
                $('ht-diff').style.display = 'block';
                $('ht-diff').classList.add('animate-fade-in');
                $('ht-terminal-result').style.display = 'block';
            }
        }

        function playWorkspaceStep(step) {
            // Steps: 0=Request, 1=Auth, 2=Route, 3=Match, 4=Execute, 5=Return, 6=Success
            resetAllElements();
            const $ = id => document.getElementById(id);

            // Update info text
            const infoTexts = [
                '// 3 devs need AI, only 2 have subs',
                '// authenticating with relay',
                '// requests flow to relay',
                '// relay matches tasks to providers',
                '// Alice & Eve process with their CLIs',
                '// encrypted patches flow back',
                '// everyone got results - no creds shared!'
            ];
            $('ws-info').textContent = infoTexts[step] || infoTexts[0];

            // Requesters always visible
            ['ws-node-bob', 'ws-node-carol', 'ws-node-dan'].forEach(id => {
                $(id).style.opacity = '1';
                $(id).classList.add(step === 0 ? 'active' : 'completed');
            });

            // Step 1: Auth - show relay with auth status
            if (step >= 1) {
                $('ws-node-relay').classList.add(step === 1 ? 'active' : 'completed');
                $('ws-node-relay').style.opacity = '1';
                if (step === 1) {
                    $('ws-relay-status').style.display = 'none';
                    $('ws-auth-status').style.display = 'block';
                } else {
                    $('ws-relay-status').style.display = 'block';
                    $('ws-auth-status').style.display = 'none';
                }
            }

            // Step 2: Route - lines from requesters to relay
            if (step >= 2) {
                ['ws-line-bob', 'ws-line-carol', 'ws-line-dan'].forEach(id => {
                    $(id).classList.add(step === 2 ? 'active' : 'completed');
                });
                $('ws-node-relay').classList.add(step === 2 || step === 3 ? 'active' : 'completed');
            }

            // Step 3: Match - lines from relay to providers
            if (step >= 3) {
                ['ws-line-alice', 'ws-line-eve'].forEach(id => {
                    $(id).classList.add(step === 3 ? 'active' : 'completed');
                });
            }

            // Step 4: Execute - providers process
            if (step >= 4) {
                $('ws-node-alice').classList.add(step === 4 ? 'active' : 'completed');
                $('ws-node-eve').classList.add(step === 4 ? 'active' : 'completed');
                $('ws-alice-status').textContent = step === 4 ? 'processing...' : 'CLAUDE CLI';
                $('ws-eve-status').textContent = step === 4 ? 'processing...' : 'GEMINI CLI';
            }

            // Step 5: Return - return paths
            if (step >= 5) {
                ['ws-return-1', 'ws-return-2', 'ws-return-3'].forEach(id => {
                    $(id).classList.add('active');
                });
            }

            // Step 6: Success - show results
            if (step >= 6) {
                ['ws-bob-result', 'ws-carol-result', 'ws-dan-result'].forEach(id => {
                    $(id).style.display = 'block';
                });
            }
        }

        function nextStep() {
            const numSteps = viewConfigs[diagramState.currentView].steps;
            let next = diagramState.currentStep + 1;
            if (next >= numSteps) next = 0;
            playStep(next);
            if (diagramState.isPlaying) {
                stopAutoPlay();
                startAutoPlay();
            }
        }

        function togglePlayPause() {
            const btn = document.getElementById('diagram-play-pause');
            if (diagramState.isPlaying) {
                stopAutoPlay();
                btn.textContent = 'Play';
            } else {
                startAutoPlay();
                btn.textContent = 'Pause';
            }
            diagramState.isPlaying = !diagramState.isPlaying;
        }

        function startAutoPlay() {
            if (diagramState.intervalId) return;

            diagramState.intervalId = setInterval(() => {
                const numSteps = viewConfigs[diagramState.currentView].steps;
                let nextStep = diagramState.currentStep + 1;
                if (nextStep >= numSteps) nextStep = 0;
                playStep(nextStep);
            }, diagramState.stepDuration);
        }

        function stopAutoPlay() {
            if (diagramState.intervalId) {
                clearInterval(diagramState.intervalId);
                diagramState.intervalId = null;
            }
        }

        function restartAnimation() {
            playStep(0);
            if (!diagramState.isPlaying) {
                diagramState.isPlaying = true;
                document.getElementById('diagram-play-pause').textContent = 'Pause';
            }
            stopAutoPlay();
            startAutoPlay();
        }

        // Initialize diagram when DOM is ready
        document.addEventListener('DOMContentLoaded', initDiagram);
    </script>
</body>
</html>
